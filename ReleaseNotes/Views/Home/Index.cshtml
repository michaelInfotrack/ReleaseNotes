@model ReleaseNotes.Models.ResultsModel

@{
    ViewBag.Title = "Home Page";
}




<div class="jumbotron">

    <h1>Releases</h1>

</div>


    @foreach (var item in Model.JiraIssues.GroupBy(x => x.Project).ToList())
    {
        <table class="table table-striped table-hover">
            <thead>
                <tr  style="background-color:black">
                    <td colspan="4" style="text-align:center; color:white; font-weight:bold">@Model.GetEnumDescription(item.FirstOrDefault().Project)</td>
                </tr>
                <tr style="color:white; font-weight:bold">
                    <td>Jira Id</td>
                    <td>Assignee</td>
                    <td>Summary</td>
                    <td>Status</td>
                </tr>
            </thead>
            @foreach (var issue in item)
            {
                <tr>
                    <td><a target="_blank" href="https://infotrack.atlassian.net/browse/@issue.Key">@issue.Key</a></td>
                    <td>@issue.Assignee</td>
                    <td>@issue.Summary</td>
                    <td>@issue.Status</td>
                </tr>
            }
        </table>
        <br />
    }



    <div class="row">

        <br />
    
        @using (Html.BeginForm("GetByDate", "Home", FormMethod.Get))
        {
            <div>
                @Html.Label("Release Date")
                @Html.TextBox("releaseLabelDate", "", new { @class = "date-picker form-control" })
            </div>

            <div>
                @Html.Label("Release Label")
                @Html.TextBox("releaseLabel", "", new { @class = "form-control" })
            </div>
            <br />
            <input type="submit" value="Get Release" class="btn btn-primary" />
        }

        @using (Html.BeginForm("GenerateEmail", "Home", FormMethod.Post))
        {
            @Html.Hidden("releaseLabel", "")
            <input type="submit" value="Generate Email" class="btn btn-primary" />
        }
        
        @if (ViewBag.Message != null)
        {
            <script type="text/javascript">
            window.onload = function () {
                alert("@ViewBag.Message.ToString().Replace("'", "")");
            };
            </script>
        }

    </div>
